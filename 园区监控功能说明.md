# 园区监控功能说明

## 功能概述

园区监控功能是一个可视化的宿舍管理系统，提供实时查看校园各园区、围合、楼栋、房间和床位的入住情况。通过直观的界面展示宿舍分布和入住率，支持点击查看详细的床位信息和学生信息。

## 主要功能

### 1. 总体统计展示
- **总楼栋数**：显示校园内所有宿舍楼栋数量
- **总房间数**：显示所有房间总数
- **总床位数**：显示所有床位总数
- **已入住人数**：显示当前已入住的学生数量
- **空床位数**：显示当前可用的空床位数量
- **入住率**：显示整体入住率百分比

### 2. 园区详情展示
- **园区分类**：按园区（东园、西园、南园、北园等）分类展示
- **园区统计**：每个园区显示楼栋数、房间数、床位数、已住人数、空床数
- **入住率标签**：根据入住率显示不同颜色的标签（绿色-正常，黄色-较高，红色-很高）

### 3. 围合详情展示
- **围合列表**：每个园区下的围合信息
- **围合统计**：显示围合内的楼栋、房间、床位统计
- **可折叠面板**：支持展开/收起围合详情

### 4. 楼栋详情展示
- **楼栋表格**：显示每个围合内的楼栋信息
- **入住率进度条**：直观显示每栋楼的入住率
- **查看房间按钮**：点击可查看该楼栋的所有房间详情

### 5. 房间详情展示（新增功能）
- **房间列表**：显示楼栋内所有房间信息
- **床位详情**：每个房间显示所有床位的状态
- **床位状态**：
  - 🟢 绿色：空床位
  - 🔴 红色：已入住床位
- **点击床位**：点击任意床位可查看该床位的学生详细信息

### 6. 学生信息展示（新增功能）
- **学生详情弹窗**：显示学生的完整信息
- **信息包括**：
  - 学号
  - 姓名
  - 性别
  - 年龄
  - 手机号
  - 邮箱

## 技术实现

### 前端技术栈
- **Vue 3**：响应式框架
- **Element Plus**：UI组件库
- **Vue Router**：路由管理
- **Axios**：HTTP请求

### 后端技术栈
- **Spring Boot**：主框架
- **MyBatis Plus**：ORM框架
- **MySQL**：数据库

### 核心API接口

#### 1. 园区监控数据
```
GET /room/campus-monitor
```
返回所有园区的统计数据和详细信息

#### 2. 楼栋房间详情
```
GET /room/building-rooms/{buildId}
```
返回指定楼栋的所有房间和床位信息

#### 3. 学生信息查询
```
GET /stu/exist/{username}
```
查询指定学号的学生详细信息

## 界面特色

### 1. 现代化设计
- **渐变背景**：使用动态渐变背景提升视觉效果
- **玻璃拟态**：卡片采用玻璃拟态效果
- **响应式布局**：适配不同屏幕尺寸

### 2. 交互体验
- **悬停效果**：卡片和按钮具有悬停动画
- **加载状态**：数据加载时显示加载动画
- **错误处理**：网络错误时显示友好提示

### 3. 数据可视化
- **进度条**：入住率使用彩色进度条显示
- **标签系统**：不同入住率使用不同颜色标签
- **统计卡片**：重要数据使用突出显示的卡片

## 使用流程

### 1. 访问页面
- 登录系统后，在侧边栏菜单选择"宿舍管理" → "园区监控"
- 或直接访问 `/campus-monitor` 路由

### 2. 查看总体情况
- 页面顶部显示总体统计数据
- 可以快速了解校园宿舍的整体入住情况

### 3. 查看园区详情
- 点击园区卡片查看详细信息
- 展开围合面板查看楼栋信息

### 4. 查看房间详情
- 在楼栋表格中点击"查看房间"按钮
- 弹窗显示该楼栋所有房间的床位情况

### 5. 查看学生信息
- 在房间详情中点击任意床位
- 如果床位已入住，会显示学生详细信息
- 如果床位为空，会提示"该床位为空"

### 6. 刷新数据
- 点击页面底部的"刷新数据"按钮
- 实时更新所有统计数据

## 数据更新机制

### 1. 实时性
- 页面加载时自动获取最新数据
- 支持手动刷新获取最新状态

### 2. 数据来源
- 数据来源于真实的宿舍管理系统数据库
- 与入住登记、退宿等操作实时同步

### 3. 缓存策略
- 前端缓存当前页面数据
- 刷新时重新获取最新数据

## 扩展功能

### 1. 可能的扩展
- **实时推送**：使用WebSocket实现数据实时推送
- **图表展示**：添加入住率趋势图表
- **搜索功能**：支持按学生姓名或学号搜索
- **导出功能**：支持导出统计数据为Excel

### 2. 权限控制
- 可根据用户角色显示不同级别的信息
- 管理员可查看所有信息，宿管只能查看管辖区域

## 注意事项

### 1. 性能考虑
- 大量数据时采用分页加载
- 图片和静态资源使用CDN加速

### 2. 安全性
- 学生敏感信息需要权限控制
- API接口需要身份验证

### 3. 兼容性
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 移动端适配

## 总结

园区监控功能为宿舍管理提供了直观、高效的可视化界面，通过分层展示的方式让用户能够快速了解宿舍分布情况，并通过点击操作查看详细信息。新增的床位详情和学生信息查看功能进一步提升了系统的实用性和用户体验。

## 文件结构

```
vue/src/views/CampusMonitor.vue          # 主页面组件
vue/src/assets/css/CampusMonitor.css     # 专用样式文件
vue/src/router/index.js                  # 路由配置
vue/src/components/Aside.vue             # 侧边栏菜单
springboot/src/main/java/com/example/springboot/controller/DormRoomController.java  # 后端接口
```

## 扩展功能

该功能可以进一步扩展：
1. 添加实时数据更新
2. 增加图表统计
3. 添加搜索和筛选功能
4. 支持导出报表
5. 添加历史数据对比

## 注意事项

1. 确保后端数据库中有相应的园区、围合、楼栋、房间数据
2. 页面需要网络连接才能获取真实数据
3. 建议在Chrome、Firefox等现代浏览器中使用
4. 移动端访问时建议横屏查看以获得更好的体验 